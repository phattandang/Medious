{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"WebSocketFactory\", {\n    enumerable: true,\n    get: function () {\n      return WebSocketFactory;\n    }\n  });\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  class WebSocketFactory {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    constructor() {}\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n      const _process = globalThis['process'];\n      if (_process) {\n        const processVersions = _process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    /**\n     * Returns the best available WebSocket constructor for the current runtime.\n     *\n     * @example\n     * ```ts\n     * const WS = WebSocketFactory.getWebSocketConstructor()\n     * const socket = new WS('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    /**\n     * Creates a WebSocket using the detected constructor.\n     *\n     * @example\n     * ```ts\n     * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    /**\n     * Detects whether the runtime can establish WebSocket connections.\n     *\n     * @example\n     * ```ts\n     * if (!WebSocketFactory.isWebSocketSupported()) {\n     *   console.warn('Falling back to long polling')\n     * }\n     * ```\n     */\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  var _default = WebSocketFactory;\n});","lineCount":151,"map":[[7,2,126,0,"Object"],[7,8,126,0],[7,9,126,0,"defineProperty"],[7,23,126,0],[7,24,126,0,"exports"],[7,31,126,0],[8,4,126,0,"enumerable"],[8,14,126,0],[9,4,126,0,"get"],[9,7,126,0],[9,18,126,0,"get"],[9,19,126,0],[10,6,126,0],[10,13,126,0,"_default"],[10,21,126,0],[11,4,126,0],[12,2,126,0],[13,2,4,0,"Object"],[13,8,4,0],[13,9,4,0,"defineProperty"],[13,23,4,0],[13,24,4,0,"exports"],[13,31,4,0],[14,4,4,0,"enumerable"],[14,14,4,0],[15,4,4,0,"get"],[15,7,4,0],[15,18,4,0,"get"],[15,19,4,0],[16,6,4,0],[16,13,4,0,"WebSocketFactory"],[16,29,4,0],[17,4,4,0],[18,2,4,0],[19,2,1,0],[20,0,2,0],[21,0,3,0],[22,2,4,7],[22,8,4,13,"WebSocketFactory"],[22,24,4,29],[22,25,4,30],[23,4,5,4],[24,0,6,0],[25,0,7,0],[26,4,8,4,"constructor"],[26,15,8,15,"constructor"],[26,16,8,15],[26,18,8,18],[26,19,8,20],[27,4,9,4],[27,11,9,11,"detectEnvironment"],[27,28,9,28,"detectEnvironment"],[27,29,9,28],[27,31,9,31],[28,6,10,8],[28,10,10,12,"_a"],[28,12,10,14],[29,6,11,8],[29,10,11,12],[29,17,11,19,"WebSocket"],[29,26,11,28],[29,31,11,33],[29,42,11,44],[29,44,11,46],[30,8,12,12],[30,15,12,19],[31,10,12,21,"type"],[31,14,12,25],[31,16,12,27],[31,24,12,35],[32,10,12,37,"constructor"],[32,21,12,48],[32,23,12,50,"WebSocket"],[33,8,12,60],[33,9,12,61],[34,6,13,8],[35,6,14,8],[35,10,14,12],[35,17,14,19,"globalThis"],[35,27,14,29],[35,32,14,34],[35,43,14,45],[35,47,14,49],[35,54,14,56,"globalThis"],[35,64,14,66],[35,65,14,67,"WebSocket"],[35,74,14,76],[35,79,14,81],[35,90,14,92],[35,92,14,94],[36,8,15,12],[36,15,15,19],[37,10,15,21,"type"],[37,14,15,25],[37,16,15,27],[37,24,15,35],[38,10,15,37,"constructor"],[38,21,15,48],[38,23,15,50,"globalThis"],[38,33,15,60],[38,34,15,61,"WebSocket"],[39,8,15,71],[39,9,15,72],[40,6,16,8],[41,6,17,8],[41,10,17,12],[41,17,17,19,"global"],[41,23,17,25],[41,28,17,30],[41,39,17,41],[41,43,17,45],[41,50,17,52,"global"],[41,56,17,58],[41,57,17,59,"WebSocket"],[41,66,17,68],[41,71,17,73],[41,82,17,84],[41,84,17,86],[42,8,18,12],[42,15,18,19],[43,10,18,21,"type"],[43,14,18,25],[43,16,18,27],[43,24,18,35],[44,10,18,37,"constructor"],[44,21,18,48],[44,23,18,50,"global"],[44,29,18,56],[44,30,18,57,"WebSocket"],[45,8,18,67],[45,9,18,68],[46,6,19,8],[47,6,20,8],[47,10,20,12],[47,17,20,19,"globalThis"],[47,27,20,29],[47,32,20,34],[47,43,20,45],[47,47,21,12],[47,54,21,19,"globalThis"],[47,64,21,29],[47,65,21,30,"WebSocketPair"],[47,78,21,43],[47,83,21,48],[47,94,21,59],[47,98,22,12],[47,105,22,19,"globalThis"],[47,115,22,29],[47,116,22,30,"WebSocket"],[47,125,22,39],[47,130,22,44],[47,141,22,55],[47,143,22,57],[48,8,23,12],[48,15,23,19],[49,10,24,16,"type"],[49,14,24,20],[49,16,24,22],[49,28,24,34],[50,10,25,16,"error"],[50,15,25,21],[50,17,25,23],[50,106,25,112],[51,10,26,16,"workaround"],[51,20,26,26],[51,22,26,28],[52,8,27,12],[52,9,27,13],[53,6,28,8],[54,6,29,8],[54,10,29,13],[54,17,29,20,"globalThis"],[54,27,29,30],[54,32,29,35],[54,43,29,46],[54,47,29,50,"globalThis"],[54,57,29,60],[54,58,29,61,"EdgeRuntime"],[54,69,29,72],[54,73,30,13],[54,80,30,20,"navigator"],[54,89,30,29],[54,94,30,34],[54,105,30,45],[54,110,30,50],[54,111,30,51,"_a"],[54,113,30,53],[54,116,30,56,"navigator"],[54,125,30,65],[54,126,30,66,"userAgent"],[54,135,30,75],[54,141,30,81],[54,145,30,85],[54,149,30,89,"_a"],[54,151,30,91],[54,156,30,96],[54,161,30,101],[54,162,30,102],[54,165,30,105],[54,170,30,110],[54,171,30,111],[54,174,30,114,"_a"],[54,176,30,116],[54,177,30,117,"includes"],[54,185,30,125],[54,186,30,126],[54,199,30,139],[54,200,30,140],[54,201,30,142],[54,203,30,144],[55,8,31,12],[55,15,31,19],[56,10,32,16,"type"],[56,14,32,20],[56,16,32,22],[56,29,32,35],[57,10,33,16,"error"],[57,15,33,21],[57,17,33,23],[57,116,33,122],[58,10,34,16,"workaround"],[58,20,34,26],[58,22,34,28],[59,8,35,12],[59,9,35,13],[60,6,36,8],[61,6,37,8],[62,6,38,8],[62,12,38,14,"_process"],[62,20,38,22],[62,23,38,25,"globalThis"],[62,33,38,35],[62,34,38,36],[62,43,38,45],[62,44,38,46],[63,6,39,8],[63,10,39,12,"_process"],[63,18,39,20],[63,20,39,22],[64,8,40,12],[64,14,40,18,"processVersions"],[64,29,40,33],[64,32,40,36,"_process"],[64,40,40,44],[64,41,40,45],[64,51,40,55],[64,52,40,56],[65,8,41,12],[65,12,41,16,"processVersions"],[65,27,41,31],[65,31,41,35,"processVersions"],[65,46,41,50],[65,47,41,51],[65,53,41,57],[65,54,41,58],[65,56,41,60],[66,10,42,16],[67,10,43,16],[67,16,43,22,"versionString"],[67,29,43,35],[67,32,43,38,"processVersions"],[67,47,43,53],[67,48,43,54],[67,54,43,60],[67,55,43,61],[68,10,44,16],[68,16,44,22,"nodeVersion"],[68,27,44,33],[68,30,44,36,"parseInt"],[68,38,44,44],[68,39,44,45,"versionString"],[68,52,44,58],[68,53,44,59,"replace"],[68,60,44,66],[68,61,44,67],[68,65,44,71],[68,67,44,73],[68,69,44,75],[68,70,44,76],[68,71,44,77,"split"],[68,76,44,82],[68,77,44,83],[68,80,44,86],[68,81,44,87],[68,82,44,88],[68,83,44,89],[68,84,44,90],[68,85,44,91],[69,10,45,16],[70,10,46,16],[70,14,46,20,"nodeVersion"],[70,25,46,31],[70,29,46,35],[70,31,46,37],[70,33,46,39],[71,12,47,20],[72,12,48,20],[72,16,48,24],[72,23,48,31,"globalThis"],[72,33,48,41],[72,34,48,42,"WebSocket"],[72,43,48,51],[72,48,48,56],[72,59,48,67],[72,61,48,69],[73,14,49,24],[73,21,49,31],[74,16,49,33,"type"],[74,20,49,37],[74,22,49,39],[74,30,49,47],[75,16,49,49,"constructor"],[75,27,49,60],[75,29,49,62,"globalThis"],[75,39,49,72],[75,40,49,73,"WebSocket"],[76,14,49,83],[76,15,49,84],[77,12,50,20],[78,12,51,20],[79,12,52,20],[79,19,52,27],[80,14,53,24,"type"],[80,18,53,28],[80,20,53,30],[80,33,53,43],[81,14,54,24,"error"],[81,19,54,29],[81,21,54,31],[81,32,54,42,"nodeVersion"],[81,43,54,53],[81,86,54,96],[82,14,55,24,"workaround"],[82,24,55,34],[82,26,55,36],[83,12,56,20],[83,13,56,21],[84,10,57,16],[85,10,58,16],[86,10,59,16],[86,17,59,23],[87,12,60,20,"type"],[87,16,60,24],[87,18,60,26],[87,31,60,39],[88,12,61,20,"error"],[88,17,61,25],[88,19,61,27],[88,30,61,38,"nodeVersion"],[88,41,61,49],[88,86,61,94],[89,12,62,20,"workaround"],[89,22,62,30],[89,24,62,32],[89,107,62,115],[89,110,63,24],[89,133,63,47],[89,136,64,24],[90,10,65,16],[90,11,65,17],[91,8,66,12],[92,6,67,8],[93,6,68,8],[93,13,68,15],[94,8,69,12,"type"],[94,12,69,16],[94,14,69,18],[94,27,69,31],[95,8,70,12,"error"],[95,13,70,17],[95,15,70,19],[95,70,70,74],[96,8,71,12,"workaround"],[96,18,71,22],[96,20,71,24],[97,6,72,8],[97,7,72,9],[98,4,73,4],[99,4,74,4],[100,0,75,0],[101,0,76,0],[102,0,77,0],[103,0,78,0],[104,0,79,0],[105,0,80,0],[106,0,81,0],[107,0,82,0],[108,4,83,4],[108,11,83,11,"getWebSocketConstructor"],[108,34,83,34,"getWebSocketConstructor"],[108,35,83,34],[108,37,83,37],[109,6,84,8],[109,12,84,14,"env"],[109,15,84,17],[109,18,84,20],[109,22,84,24],[109,23,84,25,"detectEnvironment"],[109,40,84,42],[109,41,84,43],[109,42,84,44],[110,6,85,8],[110,10,85,12,"env"],[110,13,85,15],[110,14,85,16,"constructor"],[110,25,85,27],[110,27,85,29],[111,8,86,12],[111,15,86,19,"env"],[111,18,86,22],[111,19,86,23,"constructor"],[111,30,86,34],[112,6,87,8],[113,6,88,8],[113,10,88,12,"errorMessage"],[113,22,88,24],[113,25,88,27,"env"],[113,28,88,30],[113,29,88,31,"error"],[113,34,88,36],[113,38,88,40],[113,84,88,86],[114,6,89,8],[114,10,89,12,"env"],[114,13,89,15],[114,14,89,16,"workaround"],[114,24,89,26],[114,26,89,28],[115,8,90,12,"errorMessage"],[115,20,90,24],[115,24,90,28],[115,51,90,55,"env"],[115,54,90,58],[115,55,90,59,"workaround"],[115,65,90,69],[115,67,90,71],[116,6,91,8],[117,6,92,8],[117,12,92,14],[117,16,92,18,"Error"],[117,21,92,23],[117,22,92,24,"errorMessage"],[117,34,92,36],[117,35,92,37],[118,4,93,4],[119,4,94,4],[120,0,95,0],[121,0,96,0],[122,0,97,0],[123,0,98,0],[124,0,99,0],[125,0,100,0],[126,0,101,0],[127,4,102,4],[127,11,102,11,"createWebSocket"],[127,26,102,26,"createWebSocket"],[127,27,102,27,"url"],[127,30,102,30],[127,32,102,32,"protocols"],[127,41,102,41],[127,43,102,43],[128,6,103,8],[128,12,103,14,"WS"],[128,14,103,16],[128,17,103,19],[128,21,103,23],[128,22,103,24,"getWebSocketConstructor"],[128,45,103,47],[128,46,103,48],[128,47,103,49],[129,6,104,8],[129,13,104,15],[129,17,104,19,"WS"],[129,19,104,21],[129,20,104,22,"url"],[129,23,104,25],[129,25,104,27,"protocols"],[129,34,104,36],[129,35,104,37],[130,4,105,4],[131,4,106,4],[132,0,107,0],[133,0,108,0],[134,0,109,0],[135,0,110,0],[136,0,111,0],[137,0,112,0],[138,0,113,0],[139,0,114,0],[140,0,115,0],[141,4,116,4],[141,11,116,11,"isWebSocketSupported"],[141,31,116,31,"isWebSocketSupported"],[141,32,116,31],[141,34,116,34],[142,6,117,8],[142,10,117,12],[143,8,118,12],[143,14,118,18,"env"],[143,17,118,21],[143,20,118,24],[143,24,118,28],[143,25,118,29,"detectEnvironment"],[143,42,118,46],[143,43,118,47],[143,44,118,48],[144,8,119,12],[144,15,119,19,"env"],[144,18,119,22],[144,19,119,23,"type"],[144,23,119,27],[144,28,119,32],[144,36,119,40],[144,40,119,44,"env"],[144,43,119,47],[144,44,119,48,"type"],[144,48,119,52],[144,53,119,57],[144,57,119,61],[145,6,120,8],[145,7,120,9],[145,8,121,8],[145,15,121,15,"_a"],[145,17,121,17],[145,19,121,19],[146,8,122,12],[146,15,122,19],[146,20,122,24],[147,6,123,8],[148,4,124,4],[149,2,125,0],[150,2,126,0],[150,6,126,0,"_default"],[150,14,126,0],[150,17,126,15,"WebSocketFactory"],[150,33,126,31],[151,0,126,32],[151,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;OCG;ICI,iBD;IEC;KFgE;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"},"hasCjsExports":false},"type":"js/module"}]}