{"dependencies":[{"name":"./common/style/processors/colors","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":6,"column":42,"index":110}}],"key":"YjEgu6mt8jwbJorQBLrbnB3aJ3w=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":249},"end":{"line":9,"column":54,"index":303}}],"key":"oecxEvQmWRmzTP60VuKAoww/f/4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"PropsRegistryGarbageCollector\", {\n    enumerable: true,\n    get: function () {\n      return PropsRegistryGarbageCollector;\n    }\n  });\n  var _commonStyleProcessorsColors = require(_dependencyMap[0], \"./common/style/processors/colors\");\n  var _ReanimatedModule = require(_dependencyMap[1], \"./ReanimatedModule\");\n  var FLUSH_INTERVAL_MS = 500;\n  var PropsRegistryGarbageCollector = {\n    viewsCount: 0,\n    viewsMap: new Map(),\n    intervalId: null,\n    registerView(viewTag, component) {\n      if (this.viewsMap.has(viewTag)) {\n        // In case of nested AnimatedComponents (like <GestureDetector> with <Animated.View> inside),\n        // `registerView` method is called first for the inner component (e.g. <Animated.View>)\n        // and then second time for the outer component (e.g. <GestureDetector>).\n        // Both of these components have the same viewTag so the inner component will be overwritten\n        // with the outer one. That's why we need to skip the logic during any subsequent calls.\n        return;\n      }\n      this.viewsMap.set(viewTag, component);\n      this.viewsCount++;\n      if (this.viewsCount === 1) {\n        this.registerInterval();\n      }\n    },\n    unregisterView(viewTag) {\n      this.viewsMap.delete(viewTag);\n      this.viewsCount--;\n      if (this.viewsCount === 0) {\n        this.unregisterInterval();\n      }\n    },\n    syncPropsBackToReact() {\n      var settledUpdates = _ReanimatedModule.ReanimatedModule.getSettledUpdates();\n      for (var _ref of settledUpdates) {\n        var viewTag = _ref.viewTag;\n        var styleProps = _ref.styleProps;\n        var component = this.viewsMap.get(viewTag);\n        unprocessProps(styleProps);\n        component?._syncStylePropsBackToReact(styleProps);\n      }\n    },\n    registerInterval() {\n      this.intervalId = setInterval(this.syncPropsBackToReact.bind(this), FLUSH_INTERVAL_MS);\n    },\n    unregisterInterval() {\n      if (this.intervalId !== null) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n      }\n    }\n  };\n  function unprocessProps(props) {\n    (0, _commonStyleProcessorsColors.unprocessColorsInProps)(props);\n    unprocessBoxShadow(props);\n  }\n  function unprocessBoxShadow(props) {\n    if (Array.isArray(props.boxShadow)) {\n      // @ts-ignore props is readonly\n      props.boxShadow = props.boxShadow.map(boxShadow => ({\n        ...boxShadow,\n        color: (0, _commonStyleProcessorsColors.unprocessColor)(boxShadow.color)\n      }));\n    }\n  }\n});","lineCount":75,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,13,0,"Object"],[7,8,13,0],[7,9,13,0,"defineProperty"],[7,23,13,0],[7,24,13,0,"exports"],[7,31,13,0],[8,4,13,0,"enumerable"],[8,14,13,0],[9,4,13,0,"get"],[9,7,13,0],[9,18,13,0,"get"],[9,19,13,0],[10,6,13,0],[10,13,13,0,"PropsRegistryGarbageCollector"],[10,42,13,0],[11,4,13,0],[12,2,13,0],[13,2,3,0],[13,6,3,0,"_commonStyleProcessorsColors"],[13,34,3,0],[13,37,3,0,"require"],[13,44,3,0],[13,45,3,0,"_dependencyMap"],[13,59,3,0],[14,2,9,0],[14,6,9,0,"_ReanimatedModule"],[14,23,9,0],[14,26,9,0,"require"],[14,33,9,0],[14,34,9,0,"_dependencyMap"],[14,48,9,0],[15,2,11,0],[15,6,11,6,"FLUSH_INTERVAL_MS"],[15,23,11,23],[15,26,11,26],[15,29,11,29],[16,2,13,7],[16,6,13,13,"PropsRegistryGarbageCollector"],[16,35,13,42],[16,38,13,45],[17,4,14,2,"viewsCount"],[17,14,14,12],[17,16,14,14],[17,17,14,15],[18,4,15,2,"viewsMap"],[18,12,15,10],[18,14,15,12],[18,18,15,16,"Map"],[18,21,15,19],[18,22,15,56],[18,23,15,57],[19,4,16,2,"intervalId"],[19,14,16,12],[19,16,16,14],[19,20,16,43],[20,4,18,2,"registerView"],[20,16,18,14,"registerView"],[20,17,18,15,"viewTag"],[20,24,18,30],[20,26,18,32,"component"],[20,35,18,69],[20,37,18,71],[21,6,19,4],[21,10,19,8],[21,14,19,12],[21,15,19,13,"viewsMap"],[21,23,19,21],[21,24,19,22,"has"],[21,27,19,25],[21,28,19,26,"viewTag"],[21,35,19,33],[21,36,19,34],[21,38,19,36],[22,8,20,6],[23,8,21,6],[24,8,22,6],[25,8,23,6],[26,8,24,6],[27,8,25,6],[28,6,26,4],[29,6,27,4],[29,10,27,8],[29,11,27,9,"viewsMap"],[29,19,27,17],[29,20,27,18,"set"],[29,23,27,21],[29,24,27,22,"viewTag"],[29,31,27,29],[29,33,27,31,"component"],[29,42,27,40],[29,43,27,41],[30,6,28,4],[30,10,28,8],[30,11,28,9,"viewsCount"],[30,21,28,19],[30,23,28,21],[31,6,29,4],[31,10,29,8],[31,14,29,12],[31,15,29,13,"viewsCount"],[31,25,29,23],[31,30,29,28],[31,31,29,29],[31,33,29,31],[32,8,30,6],[32,12,30,10],[32,13,30,11,"registerInterval"],[32,29,30,27],[32,30,30,28],[32,31,30,29],[33,6,31,4],[34,4,32,2],[34,5,32,3],[35,4,34,2,"unregisterView"],[35,18,34,16,"unregisterView"],[35,19,34,17,"viewTag"],[35,26,34,32],[35,28,34,34],[36,6,35,4],[36,10,35,8],[36,11,35,9,"viewsMap"],[36,19,35,17],[36,20,35,18,"delete"],[36,26,35,24],[36,27,35,25,"viewTag"],[36,34,35,32],[36,35,35,33],[37,6,36,4],[37,10,36,8],[37,11,36,9,"viewsCount"],[37,21,36,19],[37,23,36,21],[38,6,37,4],[38,10,37,8],[38,14,37,12],[38,15,37,13,"viewsCount"],[38,25,37,23],[38,30,37,28],[38,31,37,29],[38,33,37,31],[39,8,38,6],[39,12,38,10],[39,13,38,11,"unregisterInterval"],[39,31,38,29],[39,32,38,30],[39,33,38,31],[40,6,39,4],[41,4,40,2],[41,5,40,3],[42,4,42,2,"syncPropsBackToReact"],[42,24,42,22,"syncPropsBackToReact"],[42,25,42,22],[42,27,42,25],[43,6,43,4],[43,10,43,10,"settledUpdates"],[43,24,43,24],[43,27,43,27,"ReanimatedModule"],[43,44,43,43],[43,45,43,43,"ReanimatedModule"],[43,61,43,43],[43,62,43,44,"getSettledUpdates"],[43,79,43,61],[43,80,43,62],[43,81,43,63],[44,6,44,4],[44,15,44,4,"_ref"],[44,19,44,4],[44,23,44,42,"settledUpdates"],[44,37,44,56],[44,39,44,58],[45,8,44,58],[45,12,44,17,"viewTag"],[45,19,44,24],[45,22,44,24,"_ref"],[45,26,44,24],[45,27,44,17,"viewTag"],[45,34,44,24],[46,8,44,24],[46,12,44,26,"styleProps"],[46,22,44,36],[46,25,44,36,"_ref"],[46,29,44,36],[46,30,44,26,"styleProps"],[46,40,44,36],[47,8,45,6],[47,12,45,12,"component"],[47,21,45,21],[47,24,45,24],[47,28,45,28],[47,29,45,29,"viewsMap"],[47,37,45,37],[47,38,45,38,"get"],[47,41,45,41],[47,42,45,42,"viewTag"],[47,49,45,49],[47,50,45,50],[48,8,46,6,"unprocessProps"],[48,22,46,20],[48,23,46,21,"styleProps"],[48,33,46,31],[48,34,46,32],[49,8,47,6,"component"],[49,17,47,15],[49,19,47,17,"_syncStylePropsBackToReact"],[49,45,47,43],[49,46,47,44,"styleProps"],[49,56,47,54],[49,57,47,55],[50,6,48,4],[51,4,49,2],[51,5,49,3],[52,4,51,2,"registerInterval"],[52,20,51,18,"registerInterval"],[52,21,51,18],[52,23,51,21],[53,6,52,4],[53,10,52,8],[53,11,52,9,"intervalId"],[53,21,52,19],[53,24,52,22,"setInterval"],[53,35,52,33],[53,36,53,6],[53,40,53,10],[53,41,53,11,"syncPropsBackToReact"],[53,61,53,31],[53,62,53,32,"bind"],[53,66,53,36],[53,67,53,37],[53,71,53,41],[53,72,53,42],[53,74,54,6,"FLUSH_INTERVAL_MS"],[53,91,55,4],[53,92,55,5],[54,4,56,2],[54,5,56,3],[55,4,58,2,"unregisterInterval"],[55,22,58,20,"unregisterInterval"],[55,23,58,20],[55,25,58,23],[56,6,59,4],[56,10,59,8],[56,14,59,12],[56,15,59,13,"intervalId"],[56,25,59,23],[56,30,59,28],[56,34,59,32],[56,36,59,34],[57,8,60,6,"clearInterval"],[57,21,60,19],[57,22,60,20],[57,26,60,24],[57,27,60,25,"intervalId"],[57,37,60,35],[57,38,60,36],[58,8,61,6],[58,12,61,10],[58,13,61,11,"intervalId"],[58,23,61,21],[58,26,61,24],[58,30,61,28],[59,6,62,4],[60,4,63,2],[61,2,64,0],[61,3,64,1],[62,2,66,0],[62,11,66,9,"unprocessProps"],[62,25,66,23,"unprocessProps"],[62,26,66,24,"props"],[62,31,66,41],[62,33,66,43],[63,4,67,2],[63,8,67,2,"unprocessColorsInProps"],[63,36,67,24],[63,37,67,24,"unprocessColorsInProps"],[63,59,67,24],[63,61,67,25,"props"],[63,66,67,30],[63,67,67,31],[64,4,68,2,"unprocessBoxShadow"],[64,22,68,20],[64,23,68,21,"props"],[64,28,68,26],[64,29,68,27],[65,2,69,0],[66,2,71,0],[66,11,71,9,"unprocessBoxShadow"],[66,29,71,27,"unprocessBoxShadow"],[66,30,71,28,"props"],[66,35,71,45],[66,37,71,47],[67,4,72,2],[67,8,72,6,"Array"],[67,13,72,11],[67,14,72,12,"isArray"],[67,21,72,19],[67,22,72,20,"props"],[67,27,72,25],[67,28,72,26,"boxShadow"],[67,37,72,35],[67,38,72,36],[67,40,72,38],[68,6,73,4],[69,6,74,4,"props"],[69,11,74,9],[69,12,74,10,"boxShadow"],[69,21,74,19],[69,24,74,22,"props"],[69,29,74,27],[69,30,74,28,"boxShadow"],[69,39,74,37],[69,40,74,38,"map"],[69,43,74,41],[69,44,74,43,"boxShadow"],[69,53,74,52],[69,58,74,58],[70,8,75,6],[70,11,75,9,"boxShadow"],[70,20,75,18],[71,8,76,6,"color"],[71,13,76,11],[71,15,76,13],[71,19,76,13,"unprocessColor"],[71,47,76,27],[71,48,76,27,"unprocessColor"],[71,62,76,27],[71,64,76,28,"boxShadow"],[71,73,76,37],[71,74,76,38,"color"],[71,79,76,43],[72,6,77,4],[72,7,77,5],[72,8,77,6],[72,9,77,7],[73,4,78,2],[74,2,79,0],[75,0,79,1],[75,3]],"functionMap":{"names":["<global>","registerView","unregisterView","syncPropsBackToReact","registerInterval","unregisterInterval","unprocessProps","unprocessBoxShadow","props.boxShadow.map$argument_0"],"mappings":"AAA;ECiB;GDc;EEE;GFM;EGE;GHO;EIE;GJK;EKE;GLK;AMG;CNG;AOE;0CCG;MDG;CPE"},"hasCjsExports":false},"type":"js/module"}]}