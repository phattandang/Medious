{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  class WebSocketFactory {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    constructor() {}\n    static detectEnvironment() {\n      var _a;\n      if (typeof WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: globalThis.WebSocket\n        };\n      }\n      if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n        return {\n          type: 'native',\n          constructor: global.WebSocket\n        };\n      }\n      if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n        return {\n          type: 'cloudflare',\n          error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n          workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n        };\n      }\n      if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n        return {\n          type: 'unsupported',\n          error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n          workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n        };\n      }\n      // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n      const _process = globalThis['process'];\n      if (_process) {\n        const processVersions = _process['versions'];\n        if (processVersions && processVersions['node']) {\n          // Remove 'v' prefix if present and parse the major version\n          const versionString = processVersions['node'];\n          const nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n          // Node.js 22+ should have native WebSocket\n          if (nodeVersion >= 22) {\n            // Check if native WebSocket is available (should be in Node.js 22+)\n            if (typeof globalThis.WebSocket !== 'undefined') {\n              return {\n                type: 'native',\n                constructor: globalThis.WebSocket\n              };\n            }\n            // If not available, user needs to provide it\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n              workaround: 'Provide a WebSocket implementation via the transport option.'\n            };\n          }\n          // Node.js < 22 doesn't have native WebSocket\n          return {\n            type: 'unsupported',\n            error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n            workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n          };\n        }\n      }\n      return {\n        type: 'unsupported',\n        error: 'Unknown JavaScript runtime without WebSocket support.',\n        workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n      };\n    }\n    /**\n     * Returns the best available WebSocket constructor for the current runtime.\n     *\n     * @example\n     * ```ts\n     * const WS = WebSocketFactory.getWebSocketConstructor()\n     * const socket = new WS('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static getWebSocketConstructor() {\n      const env = this.detectEnvironment();\n      if (env.constructor) {\n        return env.constructor;\n      }\n      let errorMessage = env.error || 'WebSocket not supported in this environment.';\n      if (env.workaround) {\n        errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n      }\n      throw new Error(errorMessage);\n    }\n    /**\n     * Creates a WebSocket using the detected constructor.\n     *\n     * @example\n     * ```ts\n     * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n     * ```\n     */\n    static createWebSocket(url, protocols) {\n      const WS = this.getWebSocketConstructor();\n      return new WS(url, protocols);\n    }\n    /**\n     * Detects whether the runtime can establish WebSocket connections.\n     *\n     * @example\n     * ```ts\n     * if (!WebSocketFactory.isWebSocketSupported()) {\n     *   console.warn('Falling back to long polling')\n     * }\n     * ```\n     */\n    static isWebSocketSupported() {\n      try {\n        const env = this.detectEnvironment();\n        return env.type === 'native' || env.type === 'ws';\n      } catch (_a) {\n        return false;\n      }\n    }\n  }\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":141,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"WebSocketFactory"],[7,26,3,24],[7,29,3,27],[7,34,3,32],[7,35,3,33],[8,2,4,0],[9,0,5,0],[10,0,6,0],[11,2,7,0],[11,8,7,6,"WebSocketFactory"],[11,24,7,22],[11,25,7,23],[12,4,8,4],[13,0,9,0],[14,0,10,0],[15,4,11,4,"constructor"],[15,15,11,15,"constructor"],[15,16,11,15],[15,18,11,18],[15,19,11,20],[16,4,12,4],[16,11,12,11,"detectEnvironment"],[16,28,12,28,"detectEnvironment"],[16,29,12,28],[16,31,12,31],[17,6,13,8],[17,10,13,12,"_a"],[17,12,13,14],[18,6,14,8],[18,10,14,12],[18,17,14,19,"WebSocket"],[18,26,14,28],[18,31,14,33],[18,42,14,44],[18,44,14,46],[19,8,15,12],[19,15,15,19],[20,10,15,21,"type"],[20,14,15,25],[20,16,15,27],[20,24,15,35],[21,10,15,37,"constructor"],[21,21,15,48],[21,23,15,50,"WebSocket"],[22,8,15,60],[22,9,15,61],[23,6,16,8],[24,6,17,8],[24,10,17,12],[24,17,17,19,"globalThis"],[24,27,17,29],[24,32,17,34],[24,43,17,45],[24,47,17,49],[24,54,17,56,"globalThis"],[24,64,17,66],[24,65,17,67,"WebSocket"],[24,74,17,76],[24,79,17,81],[24,90,17,92],[24,92,17,94],[25,8,18,12],[25,15,18,19],[26,10,18,21,"type"],[26,14,18,25],[26,16,18,27],[26,24,18,35],[27,10,18,37,"constructor"],[27,21,18,48],[27,23,18,50,"globalThis"],[27,33,18,60],[27,34,18,61,"WebSocket"],[28,8,18,71],[28,9,18,72],[29,6,19,8],[30,6,20,8],[30,10,20,12],[30,17,20,19,"global"],[30,23,20,25],[30,28,20,30],[30,39,20,41],[30,43,20,45],[30,50,20,52,"global"],[30,56,20,58],[30,57,20,59,"WebSocket"],[30,66,20,68],[30,71,20,73],[30,82,20,84],[30,84,20,86],[31,8,21,12],[31,15,21,19],[32,10,21,21,"type"],[32,14,21,25],[32,16,21,27],[32,24,21,35],[33,10,21,37,"constructor"],[33,21,21,48],[33,23,21,50,"global"],[33,29,21,56],[33,30,21,57,"WebSocket"],[34,8,21,67],[34,9,21,68],[35,6,22,8],[36,6,23,8],[36,10,23,12],[36,17,23,19,"globalThis"],[36,27,23,29],[36,32,23,34],[36,43,23,45],[36,47,24,12],[36,54,24,19,"globalThis"],[36,64,24,29],[36,65,24,30,"WebSocketPair"],[36,78,24,43],[36,83,24,48],[36,94,24,59],[36,98,25,12],[36,105,25,19,"globalThis"],[36,115,25,29],[36,116,25,30,"WebSocket"],[36,125,25,39],[36,130,25,44],[36,141,25,55],[36,143,25,57],[37,8,26,12],[37,15,26,19],[38,10,27,16,"type"],[38,14,27,20],[38,16,27,22],[38,28,27,34],[39,10,28,16,"error"],[39,15,28,21],[39,17,28,23],[39,106,28,112],[40,10,29,16,"workaround"],[40,20,29,26],[40,22,29,28],[41,8,30,12],[41,9,30,13],[42,6,31,8],[43,6,32,8],[43,10,32,13],[43,17,32,20,"globalThis"],[43,27,32,30],[43,32,32,35],[43,43,32,46],[43,47,32,50,"globalThis"],[43,57,32,60],[43,58,32,61,"EdgeRuntime"],[43,69,32,72],[43,73,33,13],[43,80,33,20,"navigator"],[43,89,33,29],[43,94,33,34],[43,105,33,45],[43,110,33,50],[43,111,33,51,"_a"],[43,113,33,53],[43,116,33,56,"navigator"],[43,125,33,65],[43,126,33,66,"userAgent"],[43,135,33,75],[43,141,33,81],[43,145,33,85],[43,149,33,89,"_a"],[43,151,33,91],[43,156,33,96],[43,161,33,101],[43,162,33,102],[43,165,33,105],[43,170,33,110],[43,171,33,111],[43,174,33,114,"_a"],[43,176,33,116],[43,177,33,117,"includes"],[43,185,33,125],[43,186,33,126],[43,199,33,139],[43,200,33,140],[43,201,33,142],[43,203,33,144],[44,8,34,12],[44,15,34,19],[45,10,35,16,"type"],[45,14,35,20],[45,16,35,22],[45,29,35,35],[46,10,36,16,"error"],[46,15,36,21],[46,17,36,23],[46,116,36,122],[47,10,37,16,"workaround"],[47,20,37,26],[47,22,37,28],[48,8,38,12],[48,9,38,13],[49,6,39,8],[50,6,40,8],[51,6,41,8],[51,12,41,14,"_process"],[51,20,41,22],[51,23,41,25,"globalThis"],[51,33,41,35],[51,34,41,36],[51,43,41,45],[51,44,41,46],[52,6,42,8],[52,10,42,12,"_process"],[52,18,42,20],[52,20,42,22],[53,8,43,12],[53,14,43,18,"processVersions"],[53,29,43,33],[53,32,43,36,"_process"],[53,40,43,44],[53,41,43,45],[53,51,43,55],[53,52,43,56],[54,8,44,12],[54,12,44,16,"processVersions"],[54,27,44,31],[54,31,44,35,"processVersions"],[54,46,44,50],[54,47,44,51],[54,53,44,57],[54,54,44,58],[54,56,44,60],[55,10,45,16],[56,10,46,16],[56,16,46,22,"versionString"],[56,29,46,35],[56,32,46,38,"processVersions"],[56,47,46,53],[56,48,46,54],[56,54,46,60],[56,55,46,61],[57,10,47,16],[57,16,47,22,"nodeVersion"],[57,27,47,33],[57,30,47,36,"parseInt"],[57,38,47,44],[57,39,47,45,"versionString"],[57,52,47,58],[57,53,47,59,"replace"],[57,60,47,66],[57,61,47,67],[57,65,47,71],[57,67,47,73],[57,69,47,75],[57,70,47,76],[57,71,47,77,"split"],[57,76,47,82],[57,77,47,83],[57,80,47,86],[57,81,47,87],[57,82,47,88],[57,83,47,89],[57,84,47,90],[57,85,47,91],[58,10,48,16],[59,10,49,16],[59,14,49,20,"nodeVersion"],[59,25,49,31],[59,29,49,35],[59,31,49,37],[59,33,49,39],[60,12,50,20],[61,12,51,20],[61,16,51,24],[61,23,51,31,"globalThis"],[61,33,51,41],[61,34,51,42,"WebSocket"],[61,43,51,51],[61,48,51,56],[61,59,51,67],[61,61,51,69],[62,14,52,24],[62,21,52,31],[63,16,52,33,"type"],[63,20,52,37],[63,22,52,39],[63,30,52,47],[64,16,52,49,"constructor"],[64,27,52,60],[64,29,52,62,"globalThis"],[64,39,52,72],[64,40,52,73,"WebSocket"],[65,14,52,83],[65,15,52,84],[66,12,53,20],[67,12,54,20],[68,12,55,20],[68,19,55,27],[69,14,56,24,"type"],[69,18,56,28],[69,20,56,30],[69,33,56,43],[70,14,57,24,"error"],[70,19,57,29],[70,21,57,31],[70,32,57,42,"nodeVersion"],[70,43,57,53],[70,86,57,96],[71,14,58,24,"workaround"],[71,24,58,34],[71,26,58,36],[72,12,59,20],[72,13,59,21],[73,10,60,16],[74,10,61,16],[75,10,62,16],[75,17,62,23],[76,12,63,20,"type"],[76,16,63,24],[76,18,63,26],[76,31,63,39],[77,12,64,20,"error"],[77,17,64,25],[77,19,64,27],[77,30,64,38,"nodeVersion"],[77,41,64,49],[77,86,64,94],[78,12,65,20,"workaround"],[78,22,65,30],[78,24,65,32],[78,107,65,115],[78,110,66,24],[78,133,66,47],[78,136,67,24],[79,10,68,16],[79,11,68,17],[80,8,69,12],[81,6,70,8],[82,6,71,8],[82,13,71,15],[83,8,72,12,"type"],[83,12,72,16],[83,14,72,18],[83,27,72,31],[84,8,73,12,"error"],[84,13,73,17],[84,15,73,19],[84,70,73,74],[85,8,74,12,"workaround"],[85,18,74,22],[85,20,74,24],[86,6,75,8],[86,7,75,9],[87,4,76,4],[88,4,77,4],[89,0,78,0],[90,0,79,0],[91,0,80,0],[92,0,81,0],[93,0,82,0],[94,0,83,0],[95,0,84,0],[96,0,85,0],[97,4,86,4],[97,11,86,11,"getWebSocketConstructor"],[97,34,86,34,"getWebSocketConstructor"],[97,35,86,34],[97,37,86,37],[98,6,87,8],[98,12,87,14,"env"],[98,15,87,17],[98,18,87,20],[98,22,87,24],[98,23,87,25,"detectEnvironment"],[98,40,87,42],[98,41,87,43],[98,42,87,44],[99,6,88,8],[99,10,88,12,"env"],[99,13,88,15],[99,14,88,16,"constructor"],[99,25,88,27],[99,27,88,29],[100,8,89,12],[100,15,89,19,"env"],[100,18,89,22],[100,19,89,23,"constructor"],[100,30,89,34],[101,6,90,8],[102,6,91,8],[102,10,91,12,"errorMessage"],[102,22,91,24],[102,25,91,27,"env"],[102,28,91,30],[102,29,91,31,"error"],[102,34,91,36],[102,38,91,40],[102,84,91,86],[103,6,92,8],[103,10,92,12,"env"],[103,13,92,15],[103,14,92,16,"workaround"],[103,24,92,26],[103,26,92,28],[104,8,93,12,"errorMessage"],[104,20,93,24],[104,24,93,28],[104,51,93,55,"env"],[104,54,93,58],[104,55,93,59,"workaround"],[104,65,93,69],[104,67,93,71],[105,6,94,8],[106,6,95,8],[106,12,95,14],[106,16,95,18,"Error"],[106,21,95,23],[106,22,95,24,"errorMessage"],[106,34,95,36],[106,35,95,37],[107,4,96,4],[108,4,97,4],[109,0,98,0],[110,0,99,0],[111,0,100,0],[112,0,101,0],[113,0,102,0],[114,0,103,0],[115,0,104,0],[116,4,105,4],[116,11,105,11,"createWebSocket"],[116,26,105,26,"createWebSocket"],[116,27,105,27,"url"],[116,30,105,30],[116,32,105,32,"protocols"],[116,41,105,41],[116,43,105,43],[117,6,106,8],[117,12,106,14,"WS"],[117,14,106,16],[117,17,106,19],[117,21,106,23],[117,22,106,24,"getWebSocketConstructor"],[117,45,106,47],[117,46,106,48],[117,47,106,49],[118,6,107,8],[118,13,107,15],[118,17,107,19,"WS"],[118,19,107,21],[118,20,107,22,"url"],[118,23,107,25],[118,25,107,27,"protocols"],[118,34,107,36],[118,35,107,37],[119,4,108,4],[120,4,109,4],[121,0,110,0],[122,0,111,0],[123,0,112,0],[124,0,113,0],[125,0,114,0],[126,0,115,0],[127,0,116,0],[128,0,117,0],[129,0,118,0],[130,4,119,4],[130,11,119,11,"isWebSocketSupported"],[130,31,119,31,"isWebSocketSupported"],[130,32,119,31],[130,34,119,34],[131,6,120,8],[131,10,120,12],[132,8,121,12],[132,14,121,18,"env"],[132,17,121,21],[132,20,121,24],[132,24,121,28],[132,25,121,29,"detectEnvironment"],[132,42,121,46],[132,43,121,47],[132,44,121,48],[133,8,122,12],[133,15,122,19,"env"],[133,18,122,22],[133,19,122,23,"type"],[133,23,122,27],[133,28,122,32],[133,36,122,40],[133,40,122,44,"env"],[133,43,122,47],[133,44,122,48,"type"],[133,48,122,52],[133,53,122,57],[133,57,122,61],[134,6,123,8],[134,7,123,9],[134,8,124,8],[134,15,124,15,"_a"],[134,17,124,17],[134,19,124,19],[135,8,125,12],[135,15,125,19],[135,20,125,24],[136,6,126,8],[137,4,127,4],[138,2,128,0],[139,2,129,0,"exports"],[139,9,129,7],[139,10,129,8,"WebSocketFactory"],[139,26,129,24],[139,29,129,27,"WebSocketFactory"],[139,45,129,43],[140,2,130,0,"exports"],[140,9,130,7],[140,10,130,8,"default"],[140,17,130,15],[140,20,130,18,"WebSocketFactory"],[140,36,130,34],[141,0,130,35],[141,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACM;ICI,iBD;IEC;KFgE;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}