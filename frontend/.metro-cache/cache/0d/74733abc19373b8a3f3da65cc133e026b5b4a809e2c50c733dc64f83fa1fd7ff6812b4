{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _classCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\").default;\n  var _createClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WebSocketFactory = void 0;\n  /**\n   * Utilities for creating WebSocket instances across runtimes.\n   */\n  var WebSocketFactory = /*#__PURE__*/function () {\n    /**\n     * Static-only utility â€“ prevent instantiation.\n     */\n    function WebSocketFactory() {\n      _classCallCheck(this, WebSocketFactory);\n    }\n    return _createClass(WebSocketFactory, null, [{\n      key: \"detectEnvironment\",\n      value: function detectEnvironment() {\n        var _a;\n        if (typeof WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: globalThis.WebSocket\n          };\n        }\n        if (typeof global !== 'undefined' && typeof global.WebSocket !== 'undefined') {\n          return {\n            type: 'native',\n            constructor: global.WebSocket\n          };\n        }\n        if (typeof globalThis !== 'undefined' && typeof globalThis.WebSocketPair !== 'undefined' && typeof globalThis.WebSocket === 'undefined') {\n          return {\n            type: 'cloudflare',\n            error: 'Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.',\n            workaround: 'Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime.'\n          };\n        }\n        if (typeof globalThis !== 'undefined' && globalThis.EdgeRuntime || typeof navigator !== 'undefined' && ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.includes('Vercel-Edge'))) {\n          return {\n            type: 'unsupported',\n            error: 'Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.',\n            workaround: 'Use serverless functions or a different deployment target for WebSocket functionality.'\n          };\n        }\n        // Use dynamic property access to avoid Next.js Edge Runtime static analysis warnings\n        var _process = globalThis['process'];\n        if (_process) {\n          var processVersions = _process['versions'];\n          if (processVersions && processVersions['node']) {\n            // Remove 'v' prefix if present and parse the major version\n            var versionString = processVersions['node'];\n            var nodeVersion = parseInt(versionString.replace(/^v/, '').split('.')[0]);\n            // Node.js 22+ should have native WebSocket\n            if (nodeVersion >= 22) {\n              // Check if native WebSocket is available (should be in Node.js 22+)\n              if (typeof globalThis.WebSocket !== 'undefined') {\n                return {\n                  type: 'native',\n                  constructor: globalThis.WebSocket\n                };\n              }\n              // If not available, user needs to provide it\n              return {\n                type: 'unsupported',\n                error: `Node.js ${nodeVersion} detected but native WebSocket not found.`,\n                workaround: 'Provide a WebSocket implementation via the transport option.'\n              };\n            }\n            // Node.js < 22 doesn't have native WebSocket\n            return {\n              type: 'unsupported',\n              error: `Node.js ${nodeVersion} detected without native WebSocket support.`,\n              workaround: 'For Node.js < 22, install \"ws\" package and provide it via the transport option:\\n' + 'import ws from \"ws\"\\n' + 'new RealtimeClient(url, { transport: ws })'\n            };\n          }\n        }\n        return {\n          type: 'unsupported',\n          error: 'Unknown JavaScript runtime without WebSocket support.',\n          workaround: \"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation.\"\n        };\n      }\n      /**\n       * Returns the best available WebSocket constructor for the current runtime.\n       *\n       * @example\n       * ```ts\n       * const WS = WebSocketFactory.getWebSocketConstructor()\n       * const socket = new WS('wss://realtime.supabase.co/socket')\n       * ```\n       */\n    }, {\n      key: \"getWebSocketConstructor\",\n      value: function getWebSocketConstructor() {\n        var env = this.detectEnvironment();\n        if (env.constructor) {\n          return env.constructor;\n        }\n        var errorMessage = env.error || 'WebSocket not supported in this environment.';\n        if (env.workaround) {\n          errorMessage += `\\n\\nSuggested solution: ${env.workaround}`;\n        }\n        throw new Error(errorMessage);\n      }\n      /**\n       * Creates a WebSocket using the detected constructor.\n       *\n       * @example\n       * ```ts\n       * const socket = WebSocketFactory.createWebSocket('wss://realtime.supabase.co/socket')\n       * ```\n       */\n    }, {\n      key: \"createWebSocket\",\n      value: function createWebSocket(url, protocols) {\n        var WS = this.getWebSocketConstructor();\n        return new WS(url, protocols);\n      }\n      /**\n       * Detects whether the runtime can establish WebSocket connections.\n       *\n       * @example\n       * ```ts\n       * if (!WebSocketFactory.isWebSocketSupported()) {\n       *   console.warn('Falling back to long polling')\n       * }\n       * ```\n       */\n    }, {\n      key: \"isWebSocketSupported\",\n      value: function isWebSocketSupported() {\n        try {\n          var env = this.detectEnvironment();\n          return env.type === 'native' || env.type === 'ws';\n        } catch (_a) {\n          return false;\n        }\n      }\n    }]);\n  }();\n  exports.WebSocketFactory = WebSocketFactory;\n  exports.default = WebSocketFactory;\n});","lineCount":154,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_classCallCheck"],[4,21,1,13],[4,24,1,13,"require"],[4,31,1,13],[4,32,1,13,"_dependencyMap"],[4,46,1,13],[4,92,1,13,"default"],[4,99,1,13],[5,2,1,13],[5,6,1,13,"_createClass"],[5,18,1,13],[5,21,1,13,"require"],[5,28,1,13],[5,29,1,13,"_dependencyMap"],[5,43,1,13],[5,86,1,13,"default"],[5,93,1,13],[6,2,2,0,"Object"],[6,8,2,6],[6,9,2,7,"defineProperty"],[6,23,2,21],[6,24,2,22,"exports"],[6,31,2,29],[6,33,2,31],[6,45,2,43],[6,47,2,45],[7,4,2,47,"value"],[7,9,2,52],[7,11,2,54],[8,2,2,59],[8,3,2,60],[8,4,2,61],[9,2,3,0,"exports"],[9,9,3,7],[9,10,3,8,"WebSocketFactory"],[9,26,3,24],[9,29,3,27],[9,34,3,32],[9,35,3,33],[10,2,4,0],[11,0,5,0],[12,0,6,0],[13,2,4,0],[13,6,7,6,"WebSocketFactory"],[13,22,7,22],[14,4,8,4],[15,0,9,0],[16,0,10,0],[17,4,11,4],[17,13,11,4,"WebSocketFactory"],[17,30,11,4],[17,32,11,18],[18,6,11,18,"_classCallCheck"],[18,21,11,18],[18,28,11,18,"WebSocketFactory"],[18,44,11,18],[19,4,11,20],[20,4,11,21],[20,11,11,21,"_createClass"],[20,23,11,21],[20,24,11,21,"WebSocketFactory"],[20,40,11,21],[21,6,11,21,"key"],[21,9,11,21],[22,6,11,21,"value"],[22,11,11,21],[22,13,12,4],[22,22,12,11,"detectEnvironment"],[22,39,12,28,"detectEnvironment"],[22,40,12,28],[22,42,12,31],[23,8,13,8],[23,12,13,12,"_a"],[23,14,13,14],[24,8,14,8],[24,12,14,12],[24,19,14,19,"WebSocket"],[24,28,14,28],[24,33,14,33],[24,44,14,44],[24,46,14,46],[25,10,15,12],[25,17,15,19],[26,12,15,21,"type"],[26,16,15,25],[26,18,15,27],[26,26,15,35],[27,12,15,37,"constructor"],[27,23,15,48],[27,25,15,50,"WebSocket"],[28,10,15,60],[28,11,15,61],[29,8,16,8],[30,8,17,8],[30,12,17,12],[30,19,17,19,"globalThis"],[30,29,17,29],[30,34,17,34],[30,45,17,45],[30,49,17,49],[30,56,17,56,"globalThis"],[30,66,17,66],[30,67,17,67,"WebSocket"],[30,76,17,76],[30,81,17,81],[30,92,17,92],[30,94,17,94],[31,10,18,12],[31,17,18,19],[32,12,18,21,"type"],[32,16,18,25],[32,18,18,27],[32,26,18,35],[33,12,18,37,"constructor"],[33,23,18,48],[33,25,18,50,"globalThis"],[33,35,18,60],[33,36,18,61,"WebSocket"],[34,10,18,71],[34,11,18,72],[35,8,19,8],[36,8,20,8],[36,12,20,12],[36,19,20,19,"global"],[36,25,20,25],[36,30,20,30],[36,41,20,41],[36,45,20,45],[36,52,20,52,"global"],[36,58,20,58],[36,59,20,59,"WebSocket"],[36,68,20,68],[36,73,20,73],[36,84,20,84],[36,86,20,86],[37,10,21,12],[37,17,21,19],[38,12,21,21,"type"],[38,16,21,25],[38,18,21,27],[38,26,21,35],[39,12,21,37,"constructor"],[39,23,21,48],[39,25,21,50,"global"],[39,31,21,56],[39,32,21,57,"WebSocket"],[40,10,21,67],[40,11,21,68],[41,8,22,8],[42,8,23,8],[42,12,23,12],[42,19,23,19,"globalThis"],[42,29,23,29],[42,34,23,34],[42,45,23,45],[42,49,24,12],[42,56,24,19,"globalThis"],[42,66,24,29],[42,67,24,30,"WebSocketPair"],[42,80,24,43],[42,85,24,48],[42,96,24,59],[42,100,25,12],[42,107,25,19,"globalThis"],[42,117,25,29],[42,118,25,30,"WebSocket"],[42,127,25,39],[42,132,25,44],[42,143,25,55],[42,145,25,57],[43,10,26,12],[43,17,26,19],[44,12,27,16,"type"],[44,16,27,20],[44,18,27,22],[44,30,27,34],[45,12,28,16,"error"],[45,17,28,21],[45,19,28,23],[45,108,28,112],[46,12,29,16,"workaround"],[46,22,29,26],[46,24,29,28],[47,10,30,12],[47,11,30,13],[48,8,31,8],[49,8,32,8],[49,12,32,13],[49,19,32,20,"globalThis"],[49,29,32,30],[49,34,32,35],[49,45,32,46],[49,49,32,50,"globalThis"],[49,59,32,60],[49,60,32,61,"EdgeRuntime"],[49,71,32,72],[49,75,33,13],[49,82,33,20,"navigator"],[49,91,33,29],[49,96,33,34],[49,107,33,45],[49,112,33,50],[49,113,33,51,"_a"],[49,115,33,53],[49,118,33,56,"navigator"],[49,127,33,65],[49,128,33,66,"userAgent"],[49,137,33,75],[49,143,33,81],[49,147,33,85],[49,151,33,89,"_a"],[49,153,33,91],[49,158,33,96],[49,163,33,101],[49,164,33,102],[49,167,33,105],[49,172,33,110],[49,173,33,111],[49,176,33,114,"_a"],[49,178,33,116],[49,179,33,117,"includes"],[49,187,33,125],[49,188,33,126],[49,201,33,139],[49,202,33,140],[49,203,33,142],[49,205,33,144],[50,10,34,12],[50,17,34,19],[51,12,35,16,"type"],[51,16,35,20],[51,18,35,22],[51,31,35,35],[52,12,36,16,"error"],[52,17,36,21],[52,19,36,23],[52,118,36,122],[53,12,37,16,"workaround"],[53,22,37,26],[53,24,37,28],[54,10,38,12],[54,11,38,13],[55,8,39,8],[56,8,40,8],[57,8,41,8],[57,12,41,14,"_process"],[57,20,41,22],[57,23,41,25,"globalThis"],[57,33,41,35],[57,34,41,36],[57,43,41,45],[57,44,41,46],[58,8,42,8],[58,12,42,12,"_process"],[58,20,42,20],[58,22,42,22],[59,10,43,12],[59,14,43,18,"processVersions"],[59,29,43,33],[59,32,43,36,"_process"],[59,40,43,44],[59,41,43,45],[59,51,43,55],[59,52,43,56],[60,10,44,12],[60,14,44,16,"processVersions"],[60,29,44,31],[60,33,44,35,"processVersions"],[60,48,44,50],[60,49,44,51],[60,55,44,57],[60,56,44,58],[60,58,44,60],[61,12,45,16],[62,12,46,16],[62,16,46,22,"versionString"],[62,29,46,35],[62,32,46,38,"processVersions"],[62,47,46,53],[62,48,46,54],[62,54,46,60],[62,55,46,61],[63,12,47,16],[63,16,47,22,"nodeVersion"],[63,27,47,33],[63,30,47,36,"parseInt"],[63,38,47,44],[63,39,47,45,"versionString"],[63,52,47,58],[63,53,47,59,"replace"],[63,60,47,66],[63,61,47,67],[63,65,47,71],[63,67,47,73],[63,69,47,75],[63,70,47,76],[63,71,47,77,"split"],[63,76,47,82],[63,77,47,83],[63,80,47,86],[63,81,47,87],[63,82,47,88],[63,83,47,89],[63,84,47,90],[63,85,47,91],[64,12,48,16],[65,12,49,16],[65,16,49,20,"nodeVersion"],[65,27,49,31],[65,31,49,35],[65,33,49,37],[65,35,49,39],[66,14,50,20],[67,14,51,20],[67,18,51,24],[67,25,51,31,"globalThis"],[67,35,51,41],[67,36,51,42,"WebSocket"],[67,45,51,51],[67,50,51,56],[67,61,51,67],[67,63,51,69],[68,16,52,24],[68,23,52,31],[69,18,52,33,"type"],[69,22,52,37],[69,24,52,39],[69,32,52,47],[70,18,52,49,"constructor"],[70,29,52,60],[70,31,52,62,"globalThis"],[70,41,52,72],[70,42,52,73,"WebSocket"],[71,16,52,83],[71,17,52,84],[72,14,53,20],[73,14,54,20],[74,14,55,20],[74,21,55,27],[75,16,56,24,"type"],[75,20,56,28],[75,22,56,30],[75,35,56,43],[76,16,57,24,"error"],[76,21,57,29],[76,23,57,31],[76,34,57,42,"nodeVersion"],[76,45,57,53],[76,88,57,96],[77,16,58,24,"workaround"],[77,26,58,34],[77,28,58,36],[78,14,59,20],[78,15,59,21],[79,12,60,16],[80,12,61,16],[81,12,62,16],[81,19,62,23],[82,14,63,20,"type"],[82,18,63,24],[82,20,63,26],[82,33,63,39],[83,14,64,20,"error"],[83,19,64,25],[83,21,64,27],[83,32,64,38,"nodeVersion"],[83,43,64,49],[83,88,64,94],[84,14,65,20,"workaround"],[84,24,65,30],[84,26,65,32],[84,109,65,115],[84,112,66,24],[84,135,66,47],[84,138,67,24],[85,12,68,16],[85,13,68,17],[86,10,69,12],[87,8,70,8],[88,8,71,8],[88,15,71,15],[89,10,72,12,"type"],[89,14,72,16],[89,16,72,18],[89,29,72,31],[90,10,73,12,"error"],[90,15,73,17],[90,17,73,19],[90,72,73,74],[91,10,74,12,"workaround"],[91,20,74,22],[91,22,74,24],[92,8,75,8],[92,9,75,9],[93,6,76,4],[94,6,77,4],[95,0,78,0],[96,0,79,0],[97,0,80,0],[98,0,81,0],[99,0,82,0],[100,0,83,0],[101,0,84,0],[102,0,85,0],[103,4,77,4],[104,6,77,4,"key"],[104,9,77,4],[105,6,77,4,"value"],[105,11,77,4],[105,13,86,4],[105,22,86,11,"getWebSocketConstructor"],[105,45,86,34,"getWebSocketConstructor"],[105,46,86,34],[105,48,86,37],[106,8,87,8],[106,12,87,14,"env"],[106,15,87,17],[106,18,87,20],[106,22,87,24],[106,23,87,25,"detectEnvironment"],[106,40,87,42],[106,41,87,43],[106,42,87,44],[107,8,88,8],[107,12,88,12,"env"],[107,15,88,15],[107,16,88,16,"constructor"],[107,27,88,27],[107,29,88,29],[108,10,89,12],[108,17,89,19,"env"],[108,20,89,22],[108,21,89,23,"constructor"],[108,32,89,34],[109,8,90,8],[110,8,91,8],[110,12,91,12,"errorMessage"],[110,24,91,24],[110,27,91,27,"env"],[110,30,91,30],[110,31,91,31,"error"],[110,36,91,36],[110,40,91,40],[110,86,91,86],[111,8,92,8],[111,12,92,12,"env"],[111,15,92,15],[111,16,92,16,"workaround"],[111,26,92,26],[111,28,92,28],[112,10,93,12,"errorMessage"],[112,22,93,24],[112,26,93,28],[112,53,93,55,"env"],[112,56,93,58],[112,57,93,59,"workaround"],[112,67,93,69],[112,69,93,71],[113,8,94,8],[114,8,95,8],[114,14,95,14],[114,18,95,18,"Error"],[114,23,95,23],[114,24,95,24,"errorMessage"],[114,36,95,36],[114,37,95,37],[115,6,96,4],[116,6,97,4],[117,0,98,0],[118,0,99,0],[119,0,100,0],[120,0,101,0],[121,0,102,0],[122,0,103,0],[123,0,104,0],[124,4,97,4],[125,6,97,4,"key"],[125,9,97,4],[126,6,97,4,"value"],[126,11,97,4],[126,13,105,4],[126,22,105,11,"createWebSocket"],[126,37,105,26,"createWebSocket"],[126,38,105,27,"url"],[126,41,105,30],[126,43,105,32,"protocols"],[126,52,105,41],[126,54,105,43],[127,8,106,8],[127,12,106,14,"WS"],[127,14,106,16],[127,17,106,19],[127,21,106,23],[127,22,106,24,"getWebSocketConstructor"],[127,45,106,47],[127,46,106,48],[127,47,106,49],[128,8,107,8],[128,15,107,15],[128,19,107,19,"WS"],[128,21,107,21],[128,22,107,22,"url"],[128,25,107,25],[128,27,107,27,"protocols"],[128,36,107,36],[128,37,107,37],[129,6,108,4],[130,6,109,4],[131,0,110,0],[132,0,111,0],[133,0,112,0],[134,0,113,0],[135,0,114,0],[136,0,115,0],[137,0,116,0],[138,0,117,0],[139,0,118,0],[140,4,109,4],[141,6,109,4,"key"],[141,9,109,4],[142,6,109,4,"value"],[142,11,109,4],[142,13,119,4],[142,22,119,11,"isWebSocketSupported"],[142,42,119,31,"isWebSocketSupported"],[142,43,119,31],[142,45,119,34],[143,8,120,8],[143,12,120,12],[144,10,121,12],[144,14,121,18,"env"],[144,17,121,21],[144,20,121,24],[144,24,121,28],[144,25,121,29,"detectEnvironment"],[144,42,121,46],[144,43,121,47],[144,44,121,48],[145,10,122,12],[145,17,122,19,"env"],[145,20,122,22],[145,21,122,23,"type"],[145,25,122,27],[145,30,122,32],[145,38,122,40],[145,42,122,44,"env"],[145,45,122,47],[145,46,122,48,"type"],[145,50,122,52],[145,55,122,57],[145,59,122,61],[146,8,123,8],[146,9,123,9],[146,10,124,8],[146,17,124,15,"_a"],[146,19,124,17],[146,21,124,19],[147,10,125,12],[147,17,125,19],[147,22,125,24],[148,8,126,8],[149,6,127,4],[150,4,127,5],[151,2,127,5],[152,2,129,0,"exports"],[152,9,129,7],[152,10,129,8,"WebSocketFactory"],[152,26,129,24],[152,29,129,27,"WebSocketFactory"],[152,45,129,43],[153,2,130,0,"exports"],[153,9,130,7],[153,10,130,8,"default"],[153,17,130,15],[153,20,130,18,"WebSocketFactory"],[153,36,130,34],[154,0,130,35],[154,3]],"functionMap":{"names":["<global>","WebSocketFactory","WebSocketFactory#constructor","WebSocketFactory.detectEnvironment","WebSocketFactory.getWebSocketConstructor","WebSocketFactory.createWebSocket","WebSocketFactory.isWebSocketSupported"],"mappings":"AAA;ACM;ICI,iBD;IEC;KFgE;IGU;KHU;IIS;KJG;IKW;KLQ;CDC"},"hasCjsExports":true},"type":"js/module"}]}